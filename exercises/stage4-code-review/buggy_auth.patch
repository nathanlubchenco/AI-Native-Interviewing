--- a/main.go
+++ b/main.go
@@ -1,6 +1,15 @@
 package main

-import (
-   "fmt"
-   "net/http"
-)
+import (
+   "fmt"
+   "net/http"
+   "strings"
+   "github.com/dgrijalva/jwt-go"
+)

  func main() {
      http.HandleFunc("/hello", helloHandler)
      http.ListenAndServe(":8080", nil)
  }
@@
- func helloHandler(w http.ResponseWriter, r *http.Request) {
-     user := r.Context().Value("user")
+ func helloHandler(w http.ResponseWriter, r *http.Request) {
+     auth := r.Header.Get("Authorization")
+     parts := strings.SplitN(auth, " ", 2)
+     tokenString := parts[1]
+     token, _ := jwt.Parse(tokenString, nil) // No keyfunc: signature never verified
+     claims, _ := token.Claims.(jwt.MapClaims)
+     user := claims["sub"]

      if user == nil {
          w.WriteHeader(http.StatusUnauthorized)
          return
      }